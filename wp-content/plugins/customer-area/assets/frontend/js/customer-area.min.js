!function(a){a.cuar||(a.cuar={}),a.cuar.classicUploader=function(b,c){var d=this;d.$el=a(b),d.el=b,d.$el.data("cuar.classicUploader",d),d.init=function(){d.options=a.extend({},a.cuar.classicUploader.defaultOptions,c),d._getFileInput().css({opacity:0});var b=d._getPostId(),e="cuar_classic-upload_"+b,f={action:"cuar_attach_file",method:"classic-upload",post_id:b};f[e]=d._getNonce();var g=d._getDropZone();g.fileupload({url:cuar.ajaxUrl,dataType:"json",paramName:"cuar_file",formData:f,dropZone:g,add:d._onFileUploadAdd,done:d._onFileUploadDone,fail:d._onFileUploadFail,progress:d._onFileUploadProgress}),a(document).bind("dragover",d._onDragOverDropZone)},d._onDragOverDropZone=function(a){var b=d._getDropZone(),c=window.dropZoneTimeout;c?clearTimeout(c):b.addClass("in");var e=!1,f=a.target;do{if(f===b[0]){e=!0;break}f=f.parentNode}while(null!=f);e?b.addClass("hover"):b.removeClass("hover"),window.dropZoneTimeout=setTimeout(function(){window.dropZoneTimeout=null,b.removeClass("in hover")},100)},d._onFileUploadAdd=function(b,c){for(var e=0,f=c.files.length;f>e;e++){var g=c.files[e].name;if(c.files[e].attachmentItem=a(document).triggerHandler("cuar:attachmentManager:addItem",[d._getPostId(),g,g]),null==c.files[e].attachmentItem)return!1;a(document).trigger("cuar:attachmentManager:updateItemState",[c.files[e].attachmentItem,"pending"])}c.submit()},d._onFileUploadDone=function(b,c){for(var e=0,f=c.files.length;f>e;e++)if(c.result.success){var g=c.result.data.file,h=c.result.data.caption;a(document).trigger("cuar:attachmentManager:updateItem",[c.files[e].attachmentItem,d._getPostId(),g,h]),a(document).trigger("cuar:attachmentManager:updateItemState",[c.files[e].attachmentItem,"success"])}else{var i=null;c.result.data.length>0&&(i=c.result.data[0]),a(document).trigger("cuar:attachmentManager:showError",[c.files[e].attachmentItem,c.files[e].name,i,!0])}},d._onFileUploadFail=function(b,c){for(var d=0,e=c.files.length;e>d;d++)a(document).trigger("cuar:attachmentManager:showError",[c.files[d].attachmentItem,c.files[d].name,c.errorThrown,!0])},d._onFileUploadProgress=function(b,c){for(var d=0,e=c.files.length;e>d;d++){var f=parseInt(c.loaded/c.total*100,10);a(document).trigger("cuar:attachmentManager:updateItemProgress",[c.files[d].attachmentItem,f])}},d._getNonce=function(){return a("#cuar_classic-upload_"+d._getPostId(),d.el).val()},d._getPostId=function(){return d.$el.data("post-id")},d._getDropZone=function(){return a(d.options.dropzone,d.el).first()},d._getFileInput=function(){return a(d.options.fileInput,d.el).first()},d.init()},a.cuar.classicUploader.defaultOptions={dropzone:".cuar-dropzone",fileInput:".cuar-file-input"},a.fn.classicUploader=function(b){return this.each(function(){new a.cuar.classicUploader(this,b)})}}(jQuery),function(a){a.cuar||(a.cuar={}),a.cuar.fileAttachmentManager=function(b,c){var d=this;d.$el=a(b),d.el=b,d.$el.data("cuar.fileAttachmentManager",d),d.init=function(){d.options=a.extend({},a.cuar.fileAttachmentManager.defaultOptions,c),d._getSelectors().first().show(),d._getSelectorInput().change(d._onSelectorInputChanged),d._getAttachmentList().on("click",".cuar-remove-action",d._onRemoveActionClick),d._getErrorList().on("click",".cuar-dismiss",d._onDismissError),a(document).on("cuar:attachmentManager:addItem",d._onAddAttachmentItem),a(document).on("cuar:attachmentManager:sendFile",d._onSendFile),a(document).on("cuar:attachmentManager:updateFile",d._onUpdateFile),a(document).on("cuar:attachmentManager:updateItem",d._onUpdateAttachmentItem),a(document).on("cuar:attachmentManager:updateItemProgress",d._onUpdateAttachmentItemProgress),a(document).on("cuar:attachmentManager:updateItemState",d._onUpdateAttachmentItemState),a(document).on("cuar:attachmentManager:showError",d._onShowError)},d._onShowError=function(a,b,c,e){d._showError(b,c,e)},d._onUpdateAttachmentItem=function(a,b,c,e,f){return 0==b.length?void console.log("_onUpdateAttachmentItem :: Item for not found"):void d._updateAttachmentItem(b,c,e,f)},d._onUpdateAttachmentItemProgress=function(a,b,c){return 0==b.length?void console.log("_onUpdateAttachmentItemProgress :: Item not found"):void d._updateAttachmentItemProgress(b,c)},d._onUpdateAttachmentItemState=function(a,b,c){return 0==b.length?void console.log("_onUpdateAttachmentItemState :: Item not found"):void d._updateAttachmentItemState(b,c)},d._onSelectorInputChanged=function(){var b=d._getSelectors(),c=a(this).val(),e=b.filter(function(){return a(this).data("method")==c});if(!e.is(":visible")){var f=b.filter(":visible");f.length<=0?e.fadeToggle():f.fadeToggle("fast",function(){e.fadeToggle()})}},d._onRemoveActionClick=function(b){if(b.preventDefault(),confirm(cuar.confirmDeleteAttachedFile)){var c=a(this).closest(d.options.attachmentItem),e=c.data("post-id"),f=c.data("filename"),g=d._getAttachmentListRemoveNonce();d._updateAttachmentItemState(c,"pending");var h={action:"cuar_remove_attached_file",post_id:e,filename:f,cuar_remove_attachment_nonce:g};a.post(cuar.ajaxUrl,h,function(a){if(0==a.success){var b="";a.data.length>0&&(b=a.data[0]),d._showError(c,f,b,!1)}else c.slideUp(400,function(){1==d._getAttachmentItems().length&&d._getAttachmentListEmptyMessage().show(),c.remove()})})}},d._onSendFile=function(b,c,e,f,g,h,i,j){var k=i;(void 0===i||0==i.trim().length)&&(k=h),d._updateAttachmentItem(c,f,h,k),d._updateAttachmentItemState(c,"pending");var l={action:"cuar_attach_file",method:e,post_id:f,filename:h,caption:k,extra:j},m="cuar_"+e+"_"+f;l[m]=g,a.post(cuar.ajaxUrl,l,function(b){if(0==b.success){var e="";b.data.length>0&&(e=b.data[0]),d._showError(c,h,e,!0)}else{var g=b.data.file,i=b.data.caption;d._updateAttachmentItem(c,f,g,i),d._updateAttachmentItemState(c,"success"),a(document).trigger("cuar:attachmentManager:fileAttached",[c,f,h,g,i])}})},d._onUpdateFile=function(b,c,e,f,g,h){var i=h;(void 0===h||0==h.trim().length)&&(i=g),d._updateAttachmentItemState(c,"pending");var j={action:"cuar_update_attached_file",post_id:e,filename:g,caption:i,cuar_update_attachment_nonce:f};a.post(cuar.ajaxUrl,j,function(a){if(0==a.success){var b="";a.data.length>0&&(b=a.data[0]),d._showError(c,g,b,!0)}else{var f=a.data.file,h=a.data.caption;d._updateAttachmentItem(c,e,f,h),d._updateAttachmentItemState(c,"success")}})},d._onAddAttachmentItem=function(a,b,c,e,f){if(cuar.maxAttachmentCount>0&&d._getAttachmentItems().length>=cuar.maxAttachmentCount)return d._showError(null,c,cuar.tooManyAttachmentsAlready,!1),null;var g=d._getAttachmentTemplate().clone();return g.appendTo(d.options.attachmentList),d._updateAttachmentItem(g,b,c,e),d._getAttachmentListEmptyMessage().hide(),g},d._updateAttachmentItem=function(a,b,c,d){(void 0===d||0==d.trim().length)&&(d=c),a.data("post-id",b),a.data("filename",c),a.children(".cuar-caption").html(d)},d._updateAttachmentItemState=function(a,b){a.removeClass(function(a,b){return(b.match(/(^|\s)cuar-state-\S+/g)||[]).join(" ")}),a.addClass("cuar-state-"+b);var c=a.children(".cuar-actions"),e=a.children(".cuar-progress");switch(b){case"pending":c.hide(),e.show(),d._updateAttachmentItemProgress(a,0);break;case"error":c.show(),e.hide();break;case"success":c.show(),e.hide()}},d._updateAttachmentItemProgress=function(a,b){var c=a.children(".cuar-progress"),d=c.children(".indeterminate"),e=c.children(".determinate");0>=b?(d.show(),e.hide()):(d.hide(),e.show(),e.css({width:b+"%"}))},d._showError=function(b,c,e,f){if(null!=b&&(f?b.remove():d._updateAttachmentItemState(b,"error")),null!=e&&e.length>0){var g='<p class="cuar-error">';null!=c&&c.length>0&&(g+="<strong>"+c+"</strong> - "),g+=e,g+='<a href="#" class="cuar-dismiss"><span class="dashicons dashicons-dismiss"></span></a>',g+="</p>",a(g).appendTo(d._getErrorList())}},d._onDismissError=function(b){a(this).closest(".cuar-error").remove(),b.preventDefault()},d._getErrorList=function(){return a(d.options.errorList,d.el)},d._getAttachmentList=function(){return a(d.options.attachmentList)},d._getAttachmentListEmptyMessage=function(){return a(".cuar-empty-message",d._getAttachmentList())},d._getAttachmentItems=function(){return a(d.options.attachmentList+">"+d.options.attachmentItem)},d._getAttachmentItemByFilename=function(b){return d._getAttachmentItems().filter(function(){return a(this).data("filename")==b})},d._getAttachmentListRemoveNonce=function(){return a("#cuar_remove_attachment_nonce",d._getAttachmentList()).val()},d._getAttachmentTemplate=function(){return a(d.options.attachmentItemTemplate).children(d.options.attachmentItem).first()},d._getSelectorInput=function(){return a(d.options.selectorInput,d.el)},d._getSelectors=function(){return a(d.options.selectorList+">"+d.options.selectorItem,d.el)},d.init()},a.cuar.fileAttachmentManager.defaultOptions={errorList:".cuar-file-attachment-errors",attachmentList:".cuar-file-attachments",attachmentItem:".cuar-file-attachment",attachmentItemTemplate:".cuar-file-attachment-template",selectorList:".cuar-file-selectors",selectorItem:".cuar-file-selector",selectorInput:".cuar-file-selector-input"},a.fn.fileAttachmentManager=function(b){return this.each(function(){new a.cuar.fileAttachmentManager(this,b)})}}(jQuery),function(a){a.cuar||(a.cuar={}),a.cuar.ftpUploader=function(b,c){var d=this;d.$el=a(b),d.el=b,d.$el.data("cuar.ftpUploader",d),d.init=function(){d.options=a.extend({},a.cuar.ftpUploader.defaultOptions,c),d._getAddButton().click(d._onAddButtonClicked),a(document).on("cuar:attachmentManager:fileAttached",d._removeFileFromSelect)},d._removeFileFromSelect=function(b,c,e,f,g,h){var i=d._getFtpOperation();"ftp-move"==i&&d._getSelectBox().children().filter(function(){return a(this).val()==f}).remove()},d._onAddButtonClicked=function(b){b.preventDefault();var c=d._getSelectedFiles(),e=d._getPostId(),f=d._getFtpOperation();if(null!=c&&0!=c.length)for(var g=0,h=c.length;h>g;g++){var i=c[g],j=a(document).triggerHandler("cuar:attachmentManager:addItem",[e,i,i]);null!=j&&a(document).trigger("cuar:attachmentManager:sendFile",[j,"ftp-folder",e,d._getNonce(),i,"",f])}},d._getFtpOperation=function(){return d._getCopyCheckbox().is(":checked")?"ftp-copy":"ftp-move"},d._getNonce=function(){return a("#cuar_ftp-folder_"+d._getPostId(),d.el).val()},d._getPostId=function(){return d.$el.data("post-id")},d._getSelectedFiles=function(){return d._getSelectBox().val()},d._getAddButton=function(){return a(d.options.addButton,d.el)},d._getSelectBox=function(){return a(d.options.selectBox,d.el).first()},d._getCopyCheckbox=function(){return a(d.options.copyCheckbox,d.el).first()},d.init()},a.cuar.ftpUploader.defaultOptions={addButton:".cuar-ftp-add-files",selectBox:".cuar-ftp-file-selection",copyCheckbox:".cuar-copy-file-checkbox"},a.fn.ftpUploader=function(b){return this.each(function(){new a.cuar.ftpUploader(this,b)})}}(jQuery);
//# sourceMappingURL=customer-area.js.map